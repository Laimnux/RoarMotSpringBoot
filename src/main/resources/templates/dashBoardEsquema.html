<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard | RoarMot</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome para iconos -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            background-color: #151921;
            color: white;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; /* Aquí se define la fuente global */
        }
        /* Estilos para el contenedor general del MAIN */
        .main-content-wrapper {
            background-color:rgba(26, 32, 44, 0); /* Fondo transparente */
            border-radius: 0.5rem;
            padding: 1.5rem;
            /*border: 1px solid #5C7589; <-- Cambiado a Tailwind border-gray-700 en el HTML */
        }

        /* NOTA: Las clases .trigger-card, .popup-form-window, .form-content-in-popup, .field-group
                     ya NO se usan en la nueva estructura de los formularios principales de 3 columnas.
                     Sus estilos solo se aplicarán si aún se usan en otras partes del HTML (ej. dropdown del perfil).
                     Mantengo sus definiciones por si son necesarias en otras secciones. */
        .trigger-card {
            background-color: #2D3748;
            border-radius: 0.5rem;
            padding: 1.5rem;
            text-align: center;
            cursor: pointer;
            transition: background-color 0.3s ease-in-out, transform 0.2s ease-in-out;
            border: 1px solid #4A5568;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 120px;
        }
        @media (min-width: 640px) {
            .trigger-card {
                min-height: 150px;
            }
        }
        .trigger-card:hover {
            background-color: #374151;
            transform: translateY(-5px);
        }
        .trigger-card h3 {
            color: #FBBF24;
            font-weight: 700;
            margin-top: 0.5rem;
        }
        .trigger-card p {
            color: #CBD5E0;
            font-size: 0.9rem;
        }

        .popup-form-window {
            position: absolute;
            top: 100%;
            background-color: #1A242C;
            border-radius: 0.5rem;
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.3);
            border: 1px solid #5C7589;
            padding: 1.5rem;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out, visibility 0s linear 0.3s;
            transform: translateX(20px) scale(0.95);
            z-index: 60;
        }
        .group:hover .popup-form-window {
            opacity: 1;
            visibility: visible;
            transform: translateX(0) scale(1);
            transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
        }

        .form-content-in-popup {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        /* Estilos para los títulos de los formularios (ahora con iconos) */
        .section-title {
            /* color: #E2E8F0;  <-- Tailwind text-gray-300 lo sobrescribe */
            /* font-weight: 700; <-- Comentado para usar font-semibold/medium de Tailwind */
            padding-bottom: 0.75rem;
            margin-bottom: 0.75rem;
            border-bottom: 1px solid #5C7589; /* Línea divisoria más notable */
        }
        /* Estilos para los inputs dentro de los formularios */
        .form-input {
            background: transparent;
            border: none;
            /* La línea inferior se maneja con Tailwind: border-b border-gray-400 */
            padding: 0.5rem 0.25rem;
            width: 100%;
            color: #E2E8F0; /* Color del texto del input */
            transition: border-color 0.3s ease-in-out; /* Transición para el color del borde */
        }
        .form-input:focus {
            outline: none;
            /* El borde y el anillo de enfoque se manejan con Tailwind: focus:border-red-500 focus:ring-1 focus:ring-red-500 */
        }
        .form-input::placeholder {
            color: #9CA3AF;
        }
        .moto-image-container {
            width: 100%;
            height: 268px; /* Default fixed height */
            background-color: #2D3748;
            border-radius: 0.5rem;
            border: 1px solid #4A5568;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }
        /* Responsive height for moto-image-container */
        @media (min-width: 640px) {
            .moto-image-container {
                height: 224px;
            }
        }
        @media (min-width: 768px) {
            .moto-image-container {
                height: 256px;
            }
        }
        @media (min-width: 1024px) {
            .moto-image-container {
                height: 268px;
            }
        }

        .moto-image-container img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        /* Estilos para las tarjetas de la derecha */
        .right-card {
            background-color: #2D3748;
            border-radius: 0.5rem;
            padding: 1.5rem;
            border: 1px solid #4A5568;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .right-card h3 {
            color: #FBBF24;
        }
        .right-card p {
            color: #CBD5E0;
        }
        /* Estilo para el botón de Guardar Cambios */
        .save-button {
            background-color: #EF4444;
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 600;
            transition: background-color 0.3s ease-in-out, transform 0.2s ease-in-out;
        }
        .save-button:hover {
            background-color: #DC2626;
            transform: translateY(-2px);
        }
        /* Estilos para las secciones inferiores (Imagina esto, Alertas programadas) */
        .bottom-section-card {
            background-color:rgba(45, 55, 72, 0);
            border-radius: 0.5rem;
            padding: 1.5rem;
            border: 1px solid #5C7589;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-top: 1.5rem;
        }
        .bottom-section-card h3 {
            color: #FBBF24;
            font-weight: 500;
           /* margin-bottom: 0.75rem;*/
        }
        .bottom-section-card p {
            color: #CBD5E0;
            font-size: 0.9rem;
        }
        .bottom-section-card ul {
            list-style: disc;
            margin-left: 1.25rem;
            color: #CBD5E0;
            font-size: 0.9rem;
        }
        .bottom-section-card ul li {
            margin-bottom: 0.5rem;
        }
        /* Animación de destello */
        @keyframes sparkle {
            0% { transform: translateX(-100%) skewX(-30deg); }
            100% { transform: translateX(200%) skewX(-30deg); }
        }

        .sparkle-button {
            position: relative;
            z-index: 1;
        }

        .sparkle-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 50%;
            height: 100%;
            background: rgba(255, 255, 255, 0.3);
            transform: translateX(-100%) skewX(-30deg);
            transition: none;
            pointer-events: none;
            z-index: 2;
        }

        .sparkle-button:hover::before {
            animation: sparkle 0.8s ease-in-out forwards;
        }

        /* Estilos específicos para el carrusel de tips */
        .tip-item-carousel {
            flex-shrink: 0; /* Evita que los ítems se encojan */
            box-sizing: border-box; /* Incluye padding y borde en el ancho */
            padding: 0.5rem; /* Espaciado entre las tarjetas de tips */
        }
        /* Estilo para la tarjeta interna del tip */
        .tip-item-carousel > div {
            background-color: #0e272f; /* Fondo para las tarjetas de tips */
            border-radius: 0.5rem;
            /*border: 1px solid #4A5568;*/
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            height: 180px; /* Altura fija para la tarjeta interna */
            padding: 1rem; /* Ajustado el padding interno a 1rem (p-4 en Tailwind) */
        }

        /* Estilos para la tarjeta de producto */
        /* line-clamp-3 para limitar el texto a 3 líneas y añadir puntos suspensivos si se desborda */
        .line-clamp-3 {
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        /* Asegura que el área de imagen tenga un tamaño mínimo en móvil para que la imagen no sea demasiado pequeña */
        .product-image-area {
            min-height: 120px; /* Altura mínima para la imagen en móvil */
        }
        @media (min-width: 768px) {
            .product-image-area {
                min-height: auto; /* Desactiva la altura mínima en desktop */
            }
        }
    </style>
</head>

<body class="bg-[#0D1118] text-white">
    <!-- Header -->
    <header class="bg-[#0D1118] shadow-md">
        <nav class="flex flex-col md:flex-row items-center justify-between p-2 sm:p-2 bg-[#151921] gap-2 md:gap-4">
            <!-- Grupo 1: Logo -->
            <div class="flex items-center space-x-0 rounded-lg transition transform hover:scale-110 ml-2 sm:ml-5">
                <img src="<?= base_url('public/images/assets/Logo-RoarMot-Blanco.png') ?>" alt="Logo RoarMot" class="h-10 sm:h-12">
                <img src="<?= base_url('public/images/assets/tipografia-roardmot-blanco.png') ?>" alt="RoarMot" class="h-6 sm:h-8">
            </div>
            
            <!-- Grupo 2: Menú principal -->
            <div class="flex flex-wrap justify-center items-center p-2 rounded-lg gap-1 md:gap-2">
                <button class="flex items-center px-2 py-1 sm:px-3 sm:py-2 hover:bg-gray-700 rounded-lg transition transform hover:scale-110 text-sm sm:text-base">
                    <img src=<?= base_url('public/images/assets/barraMenu/iconos-panel-de-control-blanco2.png');?> alt="Panel" class="h-4 sm:h-5">
                    <span class="hidden sm:inline ml-1">Panel de control</span>
                </button>
                <button class="flex items-center px-2 py-1 sm:px-3 sm:py-2 hover:bg-gray-700 rounded-lg transition transform hover:scale-110 text-sm sm:text-base">
                    <img src=<?= base_url('public/images/assets/barraMenu/icono-CDA-blanco.png');?> alt="CDA" class="h-4 sm:h-5">
                    <span class="hidden sm:inline ml-1">CDA</span>
                </button>
                <button class="flex items-center px-2 py-1 sm:px-3 sm:py-2 hover:bg-gray-700 rounded-lg transition transform hover:scale-110 text-sm sm:text-base">
                    <img src=<?= base_url('public/images/assets/barraMenu/iconos-alerta-blanco.png');?> alt="Alertas" class="h-4 sm:h-5">
                    <span class="hidden sm:inline ml-1">Alertas</span>
                </button>
                <button class="flex items-center px-2 py-1 sm:px-3 sm:py-2 hover:bg-gray-700 rounded-lg transition transform hover:scale-110 text-sm sm:text-base">
                    <img src=<?= base_url('public/images/assets/barraMenu/simbolo-tiendaBlanco.png');?> alt="Tienda" class="h-4 sm:h-5">
                    <span class="hidden sm:inline ml-1">Tienda</span>
                </button>
                <button class="px-3 py-2 hover:bg-red-500 rounded-lg transition transform hover:scale-125 text-sm sm:text-base">
                    <span class="sm:hidden">SOS</span> <!-- Muestra SOS en móviles -->
                    <span class="hidden sm:inline ">SOS</span> <!-- Muestra SOS en desktop -->
                </button>
            </div>

            <!-- Grupo 3: Botones adicionales y Perfil de Usuario -->
            <div class="flex items-center gap-2 mr-2 sm:mr-5">
                <!-- Botón "Comprar accesorio" con efecto de destello -->
                <button class="sparkle-button bg-yellow-500 px-3 py-1 sm:px-4 sm:py-2 rounded-lg text-black hover:bg-[#D90D58] transition transform hover:scale-110 whitespace-nowrap relative overflow-hidden text-sm sm:text-base">
                    Comprar accesorio
                </button>
                <!-- Universal botón -->
                <button class="p-1 sm:p-2 hover:bg-gray-700 rounded-full transition transform hover:scale-125 ml-3">
                    <img src=<?= base_url('public/images/assets/barraMenu/icono-universalidad-blanco.png');?> alt="Idioma" class="h-4 w-4 sm:h-5 sm:w-5">
                </button>
                
                <!-- Contenedor del botón de configuración y el dropdown de perfil -->
                <div class="relative group">
                    <button class="p-1 sm:p-2 hover:bg-gray-700 rounded-full transition transform hover:scale-125">
                        <img src=<?= base_url('public/images/assets/barraMenu/iconos-configuracion-blanco-2.png');?> alt="Configuración" class="h-4 w-4 sm:h-5 sm:w-5">
                    </button>

                    <!-- Dropdown de Perfil -->
                    <div class="popup-form-window w-11/12 sm:w-96 lg:w-72 xl:w-[400px] left-1/2 -translate-x-1/2 md:left-auto md:right-0 mt-2">
                        <!-- Línea separadora 1 -->
                        <div class="flex items-center p-3 sm:p-4 border-b border-[#5C7589]">
                            <!-- Imagen de perfil (placeholder o real si tienes una URL) -->
                            <label for="profileUpload" class="relative w-14 h-14 sm:w-16 sm:h-16 flex-shrink-0 cursor-pointer overflow-hidden rounded-lg border border-gray-600 flex items-center justify-center bg-gray-800">
                                <img id="profilePreview" src="https://placehold.co/60x60/4A5568/FFFFFF?text=User" alt="Avatar de Usuario" class="w-full h-full object-cover">
                                <!-- Icono de cámara para indicar que es clicable -->
                                <div id="profileUploadArea" class="absolute inset-0 flex items-center justify-center bg-black bg-opacity-50 text-white opacity-0 hover:opacity-100 transition-opacity duration-200">
                                    <i class="fas fa-camera text-base sm:text-xl"></i>
                                </div>
                                <input type="file" id="profileUpload" accept="image/*" class="hidden" onchange="previewImage(this, 'profilePreview', 'profileUploadArea')">
                            </label>
                            <!-- Información de la persona -->
                            <div class="ml-3">
                                <p class="text-sm sm:text-base text-white font-semibold"><?= esc($NOMBRE_USUARIO ?? 'Usuario') ?></p>
                                <p class="text-xs sm:text-sm text-gray-400"><?= esc($EMAIL_USUARIO ?? 'correo@ejemplo.com') ?></p>
                                <span class="text-xs text-gray-500 mt-1 block"><?= esc($rol_nombre ?? 'Rol') ?> habitual</span>
                            </div>
                        </div>
                        <!-- Más opciones de configuración -->
                        <div class="p-3 sm:p-4 border-b border-[#5C7589]">
                            <p class="text-gray-300 text-sm font-semibold mb-2">Más opciones de configuración</p>
                        </div>
                        <a href="<?php echo base_url('panel/panelInicio');?>" class="flex items-center px-3 py-2 sm:px-4 sm:py-3 text-gray-300 hover:bg-gray-700 transition rounded-b-lg text-sm sm:text-base">
                            <i class="fas fa-cog mr-2 sm:mr-3 text-base sm:text-lg"></i>
                            Panel Proveedor
                        </a>
                        <a href="#" class="flex items-center px-3 py-2 sm:px-4 sm:py-3 text-gray-300 hover:bg-gray-700 transition rounded-b-lg text-sm sm:text-base">
                            <i class="fas fa-cog mr-2 sm:mr-3 text-base sm:text-lg"></i>
                            Configuración de la cuenta
                        </a>
                        <a href="<?= base_url('cerrarSesion'); ?>" class="flex items-center px-3 py-2 sm:px-4 sm:py-3 text-red-500 hover:bg-gray-700 transition rounded-b-lg text-sm sm:text-base">
                            <i class="fas fa-sign-out-alt mr-2 sm:mr-3 text-base sm:text-lg"></i>
                            Cerrar Sesión
                        </a>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <!-- Barra divisoria roja -->
    <div class="h-[1.2px] w-full bg-gradient-to-r from-transparent via-red-600 to-transparent shadow-lg shadow-red-600/10"></div>

    <!-- Contenido principal -->
    <main class="mx-auto p-4 md:p-8 max-w-full xl:max-w-screen-2xl">
        
        <!-- Nuevo contenedor para alinear todo el contenido principal -->
        <div class="w-full lg:max-w-[1300px] mx-auto">
            
            <!-- Contenedor principal de formularios y columna de imagen/tarjetas -->
            <!-- Eliminado mx-auto y lg:max-w-[1300px] de aquí para que el padre lo controle -->
            <div class="flex flex-col lg:flex-row lg:gap-6 main-content-wrapper lg:items-start w-full">
                <!-- Columna izquierda: Contenedor de Formularios -->
                <div class="bg-transparent border border-[#5C7589] rounded-lg shadow p-4 sm:p-6 w-full md:w-[900px] h-auto flex flex-col justify-start lg:flex-shrink-0 lg:w-[900px]">
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 h-full">
                        <!-- Formulario: Datos Básicos de la Moto -->
                        <div class="flex flex-col border border-gray-700 rounded-lg p-3 sm:p-4">
                            <h2 class="section-title text-base sm:text-lg text-white-300 font-light mb-4 flex items-center justify-between relative">
                                <div class="flex items-center gap-2">
                                    <!-- Icono de moto en PNG -->
                                    <img src="<?= base_url('public/images/assets/moto2Blanco.png') ?>" alt="Icono Moto" class="w-5 h-5 sm:w-6 sm:h-6 object-contain">
                                    <span>Datos básicos</span>
                                </div>
                                <!-- Tooltip para Datos Básicos -->
                                <div class="relative group">
                                    <i class="fas fa-circle-question text-gray-400 hover:text-yellow-500 cursor-help text-sm sm:text-base"></i>
                                    <div class="absolute hidden group-hover:block bg-[#1A242C] text-white text-xs rounded-lg p-2 w-48 z-50 -right-2 bottom-full left-1/2 mt-2 shadow-lg border border-gray-700 -translate-x-1/2">
                                        Los datos básicos de tu moto son clave para un diagnóstico preciso. Nos permiten identificar posibles fallos y ofrecerte una asistencia más efectiva, garantizando tu seguridad en cada viaje.
                                    </div>
                                </div>
                            </h2>
                            <div class="space-y-4 flex-grow">
                                <div>
                                    <label class="block text-xs sm:text-sm text-gray-400 mb-1">Placa</label>
                                    <!-- CLASES DE BORDE Y ENFOQUE ACTUALIZADAS -->
                                    <input type="text" class="form-input text-sm sm:text-base bg-transparent border-b border-gray-400 hover:border-red-500 focus:outline-none focus:border-red-500 focus:ring-1 focus:ring-red-500" placeholder="ABC-123">
                                </div>
                                <div>
                                    <label class="block text-xs sm:text-sm text-gray-400 mb-1">Número de serie</label>
                                    <!-- CLASES DE BORDE Y ENFOQUE ACTUALIZADAS -->
                                    <input type="text" class="form-input text-sm sm:text-base bg-transparent border-b border-gray-400 hover:border-red-500 focus:outline-none focus:border-red-500 focus:ring-1 focus:ring-red-500" placeholder="XYZ123456789">
                                </div>
                                <div>
                                    <label class="block text-xs sm:text-sm text-gray-400 mb-1">Número de motor</label>
                                    <!-- CLASES DE BORDE Y ENFOQUE ACTUALIZADAS -->
                                    <input type="text" class="form-input text-sm sm:text-base bg-transparent border-b border-gray-400 hover:border-red-500 focus:outline-none focus:border-red-500 focus:ring-1 focus:ring-red-500" placeholder="MTR987654321">
                                </div>
                                <div>
                                    <label class="block text-xs sm:text-sm text-gray-400 mb-1">Marca / Modelo</label>
                                    <!-- CLASES DE BORDE Y ENFOQUE ACTUALIZADAS -->
                                    <input type="text" class="form-input text-sm sm:text-base bg-transparent border-b border-gray-400 hover:border-red-500 focus:outline-none focus:border-red-500 focus:ring-1 focus:ring-red-500" placeholder="Yamaha YZF-R3">
                                </div>
                                <div>
                                    <label class="block text-xs sm:text-sm text-gray-400 mb-1">Color</label>
                                    <!-- CLASES DE BORDE Y ENFOQUE ACTUALIZADAS -->
                                    <input type="text" class="form-input text-sm sm:text-base bg-transparent border-b border-gray-400 hover:border-red-500 focus:outline-none focus:border-red-500 focus:ring-1 focus:ring-red-500" placeholder="Rojo">
                                </div>
                            </div>
                        </div>

                        <!-- Formulario: Datos Técnicos / Mecánicos -->
                        <div class="flex flex-col border border-gray-700 rounded-lg p-3 sm:p-4">
                            <h2 class="section-title text-sm sm:text-base text-white-300 font-light mb-4 flex items-center justify-between relative">
                                <div class="flex items-center gap-2">
                                    <i class="fas fa-gear text-lg sm:text-xl"></i>
                                    <span>Datos técnicos / Mecánicos</span>
                                </div>
                                <!-- Tooltip para Datos Técnicos -->
                                <div class="relative group">
                                    <i class="fas fa-circle-question text-gray-400 hover:text-yellow-500 cursor-help text-sm sm:text-base"></i>
                                    <div class="absolute hidden group-hover:block bg-[#1A242C] text-white text-xs rounded-lg p-2 w-48 z-50 -right-2 bottom-full left-1/2 mt-2 shadow-lg border border-gray-700 -translate-x-1/2">
                                        Estos datos son fundamentales para la salud de tu moto. Nos permiten generar alertas de mantenimiento personalizadas y ofrecerte lecturas de kilometraje más precisas, optimizando su rendimiento y durabilidad.
                                    </div>
                                </div>
                            </h2>
                            <div class="space-y-4 flex-grow">
                                <div>
                                    <label class="block text-xs sm:text-sm text-gray-400 mb-1">Kilometraje actual</label>
                                    <!-- CLASES DE BORDE Y ENFOQUE ACTUALIZADAS -->
                                    <input type="number" class="form-input text-sm sm:text-base bg-transparent border-b border-gray-400 hover:border-red-500 focus:outline-none focus:border-red-500 focus:ring-1 focus:ring-red-500" placeholder="25000">
                                </div>
                                <div>
                                    <label class="block text-xs sm:text-sm text-gray-400 mb-1">Tipo de combustible</label>
                                    <!-- CLASES DE BORDE Y ENFOQUE ACTUALIZADAS -->
                                    <select class="form-input bg-transparent border-b border-gray-400 hover:border-red-500 focus:outline-none focus:border-red-500 focus:ring-1 focus:ring-red-500 text-sm sm:text-base">
                                        <option class="bg-[#1A202C] text-white">Gasolina</option>
                                        <option class="bg-[#1A202C] text-white">Diésel</option>
                                        <option class="bg-[#1A202C] text-white">Eléctrico</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-xs sm:text-sm text-gray-400 mb-1">Capacidad del tanque (litros)</label>
                                    <!-- CLASES DE BORDE Y ENFOQUE ACTUALIZADAS -->
                                    <input type="number" step="0.1" class="form-input text-sm sm:text-base bg-transparent border-b border-gray-400 hover:border-red-500 focus:outline-none focus:border-red-500 focus:ring-1 focus:ring-red-500" placeholder="14.5">
                                </div>
                                <div>
                                    <label class="block text-xs sm:text-sm text-gray-400 mb-1">Presión recomendada de llantas (PSI)</label>
                                    <div class="flex flex-col sm:flex-row gap-2 sm:gap-4">
                                        <!-- CLASES DE BORDE Y ENFOQUE ACTUALIZADAS -->
                                        <input type="number" placeholder="Delantera" class="form-input flex-1 text-sm sm:text-base bg-transparent border-b border-gray-400 hover:border-red-500 focus:outline-none focus:border-red-500 focus:ring-1 focus:ring-red-500">
                                        <!-- CLASES DE BORDE Y ENFOQUE ACTUALIZADAS -->
                                        <input type="number" placeholder="Trasera" class="form-input flex-1 text-sm sm:text-base bg-transparent border-b border-gray-400 hover:border-red-500 focus:outline-none focus:border-red-500 focus:ring-1 focus:ring-red-500">
                                    </div>
                                </div>
                                <div>
                                    <label class="block text-xs sm:text-sm text-gray-400 mb-1">Batería</label>
                                    <!-- CLASES DE BORDE Y ENFOQUE ACTUALIZADAS -->
                                    <input type="text" class="form-input text-sm sm:text-base bg-transparent border-b border-gray-400 hover:border-red-500 focus:outline-none focus:border-red-500 focus:ring-1 focus:ring-red-500" placeholder="12V 7Ah">
                                </div>
                            </div>
                        </div>

                        <!-- Formulario: Documentación Legal -->
                        <div class="flex flex-col border border-gray-700 rounded-lg p-3 sm:p-4">
                            <h2 class="section-title text-sm sm:text-base text-white-300 font-light mb-4 flex items-center justify-between relative">
                                <div class="flex items-center gap-2">
                                    <i class="fas fa-file-lines text-lg sm:text-xl"></i>
                                    <span>Documentación Legal</span>
                                </div>
                                <!-- Tooltip para Documentación Legal -->
                                <div class="relative group">
                                    <i class="fas fa-circle-question text-gray-400 hover:text-yellow-500 cursor-help text-sm sm:text-base"></i>
                                    <div class="absolute hidden group-hover:block bg-[#1A242C] text-white text-xs rounded-lg p-2 w-48 z-50 -right-2 bottom-full left-1/2 mt-2 shadow-lg border border-gray-700 -translate-x-1/2">
                                        Mantener tu documentación legal al día aquí te ofrece tranquilidad. Podrás acceder a tus documentos importantes en cualquier momento, evitando contratiempos si los olvidas o extravías.
                                    </div>
                                </div>
                            </h2>
                            <div class="space-y-4 flex-grow">
                                <div>
                                    <label class="block text-xs sm:text-sm text-gray-400 mb-1">SOAT vigente hasta</label>
                                    <div class="flex flex-col sm:flex-row items-start sm:items-center gap-2">
                                        <!-- CLASES DE BORDE Y ENFOQUE ACTUALIZADAS -->
                                        <input type="date" class="form-input flex-1 text-sm sm:text-base bg-transparent border-b border-gray-400 hover:border-red-500 focus:outline-none focus:border-red-500 focus:ring-1 focus:ring-red-500">
                                        <span class="text-gray-400 text-xs sm:text-sm">o</span>
                                        <label for="soatUpload" class="bg-[#EF4444] hover:bg-[#DC2626] px-3 py-1 rounded text-xs sm:text-sm transition cursor-pointer whitespace-nowrap">
                                            Subir PDF
                                            <input type="file" id="soatUpload" accept=".pdf" class="hidden">
                                        </label>
                                    </div>
                                </div>
                                <div>
                                    <label class="block text-xs sm:text-sm text-gray-400 mb-1">Revisión técnico-mecánica</label>
                                    <label for="tecnomecanicaUpload" class="w-full bg-transparent border-b border-gray-400 hover:border-red-500 p-2 text-left text-xs sm:text-sm transition rounded cursor-pointer block focus:outline-none focus:border-red-500 focus:ring-1 focus:ring-red-500">
                                        Seleccionar archivo...
                                        <input type="file" id="tecnomecanicaUpload" accept=".pdf" class="hidden">
                                    </label>
                                </div>
                                <div>
                                    <label class="block text-xs sm:text-sm text-gray-400 mb-1">Tarjeta de propiedad o título</label>
                                    <!-- CLASES DE BORDE Y ENFOQUE ACTUALIZADAS -->
                                    <input type="text" class="form-input text-sm sm:text-base bg-transparent border-b border-gray-400 hover:border-red-500 focus:outline-none focus:border-red-500 focus:ring-1 focus:ring-red-500" placeholder="Número de tarjeta">
                                </div>
                            </div>
                            <!-- Botón de guardar cambios para todos los formularios (movido aquí para estar cerca de la imagen) -->
                            <div class="p-0 text-right mt-0">
                                <button type="button" class="save-button px-4 py-2 sm:px-6 sm:py-3 text-sm sm:text-base w-full hover:bg-[#00FFB7]">
                                    Guardar Cambios
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Columna derecha: Imagen y tarjetas -->
                <div class="flex flex-col gap-6 w-full lg:min-w-[300px] lg:max-w-[400px]">
                    <!-- Tarjeta de imagen de moto -->
                    <div class="bg-white rounded-xl shadow-lg p-6 flex flex-col items-center">
                        <h2 class="text-2xl font-semibold text-gray-900 mb-4">Mi Moto</h2>
                        <form id="motoForm" th:action="@{/actualizar-imagen-moto}" method="post" enctype="multipart/form-data" class="w-full">
                            <label for="motoUpload" class="moto-image-container relative h-48 sm:h-56 md:h-64 cursor-pointer">
                                <img id="motoPreview" src="" alt="Foto de tu moto" class="w-full h-full object-cover transition-opacity duration-300 hidden">
                                <div id="uploadArea" class="flex flex-col items-center justify-center h-full w-full p-4 text-gray-400">
                                    <i class="fas fa-camera text-3xl sm:text-4xl mb-2 sm:mb-3"></i>
                                    <p class="text-center text-sm sm:text-base">Sube foto de tu moto<br><span class="text-xs sm:text-sm">(383×268 px)</span></p>
                                </div>
                                <input type="file" id="motoUpload" name="motoUpload" accept="image/*" class="hidden">
                            </label>
                        </form>
                    </div>

                    <!-- Tarjeta de contenido adicional -->
                    <div class="bg-white rounded-xl shadow-lg p-6 right-card">
                        <h3 class="font-bold text-lg sm:text-xl">Nuestros accesorios</h3>
                        <p class="mt-2 text-sm sm:text-base">Encuentra todo lo que necesitas para tu moto.</p>
                    </div>
                </div>
            </div>

            <!-- Sección "Tips para Moteros" (Carrusel Automático en Grid) -->
            <!-- Eliminado mx-auto y lg:max-w-[1300px] de aquí para que el padre lo controle -->
            <div class="bottom-section-card p-0 sm:p-2 mt-2 w-full h-auto lg:h-[220px] overflow-hidden relative">
                <h3 class="font-light text-lg text-sm text-yellow-500 mb-0 ml-5">Tips para Moteros</h3>
                <div id="tips-carousel-container" class="relative h-full">
                    <div id="tips-inner-wrapper" class="flex transition-transform duration-500 ease-in-out h-full">
                        <!-- Tip 1 -->
                        <div class="tip-item-carousel">
                            <div class="bg-[#1A242C] p-4 rounded-lg  flex flex-col justify-between w-[300px] h-[180px] mr-10">
                                <h4 class="font-semibold text-base sm:text-lg text-gray-200 mb-2">Revisa la Presión de tus Llantas</h4>
                                <p class="text-sm sm:text-base text-gray-300">Una presión adecuada mejora la seguridad, el agarre y la vida útil de tus neumáticos. ¡Compruébala antes de cada viaje!</p>
                                <!--<button class="mt-4 text-red-500 hover:text-red-400 text-sm sm:text-base text-left">Leer más <i class="fas fa-arrow-right ml-1"></i></button>-->
                            </div>
                        </div>
                        <!-- Tip 2 -->
                        <div class="tip-item-carousel">
                            <div class="bg-gray-800 p-4 rounded-lg  flex flex-col justify-between w-[300px] h-[180px] mr-10">
                                <h4 class="font-semibold text-base sm:text-lg text-gray-200 mb-2">Cambio de Aceite Regular</h4>
                                <p class="text-sm sm:text-base text-gray-300">El aceite es la sangre de tu motor. Un cambio a tiempo previene el desgaste prematuro y asegura un rendimiento óptimo.</p>
                                
                            </div>
                        </div>
                        <!-- Tip 3 -->
                        <div class="tip-item-carousel">
                            <div class="bg-gray-800 p-6 rounded-lg  flex flex-col justify-between w-[300px] h-[180px] mr-10">
                                <h4 class="font-semibold text-base sm:text-lg text-gray-200 mb-2">Ajusta tus Frenos</h4>
                                <p class="text-sm sm:text-base text-gray-300">Un sistema de frenos en buen estado es vital. Asegúrate de que las pastillas y el líquido estén en óptimas condiciones.</p>
                                
                            </div>
                        </div>
                        <!-- Tip 4 -->
                        <div class="tip-item-carousel">
                            <div class="bg-gray-800 p-6 rounded-lg  flex flex-col justify-between w-[300px] h-[180px] mr-8">
                                <h4 class="font-semibold text-base sm:text-lg text-gray-200 mb-2">Limpia y Lubrica la Cadena</h4>
                                <p class="text-sm sm:text-base text-gray-300">Una cadena limpia y bien lubricada reduce la fricción, prolonga su vida útil y mejora la transmisión de potencia.</p>
                                
                            </div>
                        </div>
                        <!-- Tip 5 -->
                        <div class="tip-item-carousel">
                            <div class="bg-gray-800 p-6 rounded-lg  flex flex-col justify-between w-[300px] h-[180px] mr-10 ">
                                <h4 class="font-semibold text-base sm:text-lg text-gray-200 mb-2">Verifica las Luces</h4>
                                <p class="text-sm sm:text-base text-gray-300">Asegúrate de que todas tus luces (faros, direccionales, freno) funcionen correctamente para ser visible y seguro.</p>
                                
                            </div>
                        </div>
                        <!-- Tip 6 -->
                        <div class="tip-item-carousel">
                            <div class="bg-gray-800 p-4 rounded-lg  flex flex-col justify-between w-[300px] h-[180px] mr-10">
                                <h4 class="font-semibold text-base sm:text-lg text-gray-200 mb-2">Inspecciona los Niveles de Líquidos</h4>
                                <p class="text-sm sm:text-base text-gray-300">Revisa el líquido de frenos, refrigerante y otros fluidos para evitar problemas mecánicos.</p>
                                
                            </div>
                        </div>
                        <!-- Tip 7 -->
                        <div class="tip-item-carousel">
                            <div class="bg-gray-800 p-4 rounded-lg  flex flex-col justify-between w-[300px] h-[180px] mr-10">
                                <h4 class="font-semibold text-base sm:text-lg text-gray-200 mb-2">Usa Equipo de Protección Adecuado</h4>
                                <p class="text-sm sm:text-base text-gray-300">Casco, guantes, chaqueta y botas son esenciales para tu seguridad en la carretera.</p>
                                
                            </div>
                        </div>
                        <!-- Tip 8 -->
                        <div class="tip-item-carousel">
                            <div class="bg-gray-800 p-6 rounded-lg  flex flex-col justify-between w-[300px] h-[180px] mr-10">
                                <h4 class="font-semibold text-base sm:text-lg text-gray-200 mb-2">Planifica tus Rutas</h4>
                                <p class="text-sm sm:text-base text-gray-300">Conocer tu camino y las condiciones de la carretera te ayudará a tener un viaje más seguro y placentero.</p>
                                
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tarjeta de Visualizacion de Producto -->
            <div class="product-card-display w-full mt-6 lg:max-w-[800px] ml-auto">
                <div class="flex flex-col md:flex-row rounded-lg overflow-hidden border border-gray-700 shadow-lg h-auto md:h-[200px]">
                    <!-- Sección de Detalles del Producto (izquierda) -->
                    <div class="product-details-area bg-[#212326] p-4 flex flex-col justify-center w-full md:w-2/3">
                        <h3 class="font-bold text-lg sm:text-xl text-yellow-500 mb-2 leading-tight">Casco XL Pro con Alerón Respiratorio</h3>
                        <p class="text-sm sm:text-base text-gray-300 mb-4 line-clamp-3">
                            Diseñado para la máxima protección y confort. Cuenta con sistema de ventilación avanzado y visera anti-rayas. Ideal para viajes largos y uso diario.
                        </p>
                        <div class="flex items-center justify-between">
                            <span class="text-xl sm:text-2xl font-bold text-white-500">$250.000 COP</span>
                            <button class="bg-red-600 hover:bg-[#00FFB7] text-white font-bold py-2 px-4 rounded-lg transition duration-300 ease-in-out text-sm sm:text-base">
                                Ver Producto
                            </button>
                        </div>
                    </div>
                    
                    <!-- Sección de Imagen del Producto (derecha) -->
                    <div class="product-image-area w-full md:w-1/3 bg-gray-800 flex-shrink-0">
                        <!-- Puedes reemplazar esta URL por la URL de tu imagen real del casco -->
                        <img src="<?php echo base_url('public/images/assets/casco 2.jpg');?>" 
                             alt="Casco XL Pro con Alerón Respiratorio" 
                             class="w-full h-full object-cover">
                    </div>
                </div>
            </div>

            <!-- Sección "Alertas programadas" (incluida para mantener el contexto del diseño) -->
            <!-- Eliminado mx-auto y lg:max-w-[1300px] de aquí para que el padre lo controle -->
            <div class="bottom-section-card p-4 sm:p-6 mt-6 w-full">
                <h3 class="font-bold text-lg sm:text-xl">Alertas programadas</h3>
                <p class="mt-2 text-sm sm:text-base">Aquí verás tus alertas personalizadas para mantenimientos, documentos y más.</p>
                <div class="mt-4 text-gray-500 text-center text-sm sm:text-base">
                    <p>No tienes alertas programadas por ahora.</p>
                </div>
            </div>

            <!-- Sección "Renueva tu soat" (Movida dentro del contenedor principal) -->
            <div class="bottom-section-card p-4 sm:p-6 mt-6 w-full">
                <h3 class="font-bold text-lg sm:text-xl">Renueva tu SOAT</h3>
                <p class="mt-2 text-sm sm:text-base">De manera rápida y segura.</p>
            </div>

        </div> <!-- Fin del nuevo contenedor principal de contenido -->
    </main>

    <script>
        // Función genérica para previsualizar imágenes
        function previewImage(input, previewId, uploadAreaId) {
            const preview = document.getElementById(previewId);
            const uploadArea = document.getElementById(uploadAreaId);
            
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    preview.src = e.target.result;
                    preview.classList.remove('hidden'); // Asegura que la imagen se muestre
                    if (uploadArea) { // Oculta el área de carga si existe
                        uploadArea.classList.add('hidden');
                    }
                }
                
                reader.readAsDataURL(input.files[0]);
            } else {
                // Si no se selecciona ningún archivo, muestra el placeholder y el área de carga
                preview.src = preview.dataset.defaultSrc || ''; // Usa un defaultSrc si lo tienes
                preview.classList.add('hidden'); // Oculta la imagen si no hay archivo
                if (uploadArea) {
                    uploadArea.classList.remove('hidden'); // Muestra el área de carga
                }
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            const soatUploadInput = document.getElementById('soatUpload');
            const tecnomecanicaUploadInput = document.getElementById('tecnomecanicaUpload');

            soatUploadInput.addEventListener('change', function() {
                if (this.files && this.files[0]) {
                    console.log('SOAT seleccionado:', this.files[0].name);
                }
            });

            tecnomecanicaUploadInput.addEventListener('change', function() {
                if (this.files && this.files[0]) {
                    console.log('Tecnomecánica seleccionada:', this.files[0].name);
                }
            });

            // Inicializar la imagen de perfil si ya hay una por defecto
            const profilePreview = document.getElementById('profilePreview');
            const profileUploadArea = document.getElementById('profileUploadArea');
            if (profilePreview && profilePreview.src && profilePreview.src !== window.location.href && !profilePreview.src.includes('placehold.co')) { 
                profileUploadArea.classList.add('hidden');
                profilePreview.classList.remove('hidden');
            } else {
                profilePreview.classList.add('hidden'); 
                profileUploadArea.classList.remove('hidden');
            }

            // Modificar la llamada a previewImage para la imagen de la moto
            const motoUploadInput = document.getElementById('motoUpload');
            if (motoUploadInput) {
                // Si ya hay una imagen de moto cargada (ej. desde la DB), previsualizarla
                if (motoUploadInput.dataset.initialImage) { // Asume que tienes un data-initial-image en el input si viene de la DB
                    document.getElementById('motoPreview').src = motoUploadInput.dataset.initialImage;
                    document.getElementById('motoPreview').classList.remove('hidden');
                    document.getElementById('uploadArea').classList.add('hidden');
                }
                motoUploadInput.onchange = function() {
                    previewImage(this, 'motoPreview', 'uploadArea');
                };
            }

            // Lógica del carrusel de tips automático en grid
            const tipsCarouselContainer = document.getElementById('tips-carousel-container');
            const tipsInnerWrapper = document.getElementById('tips-inner-wrapper');
            const tips = document.querySelectorAll('.tip-item-carousel');
            const totalTips = tips.length;
            let currentSlide = 0; // Esto representará la "página" de tips
            let intervalId;

            // Función para determinar cuántos tips se muestran por "página" según el tamaño de la pantalla
            function getTipsPerPage() {
                if (window.innerWidth >= 1024) { // Desktop (lg breakpoint)
                    return 4;
                } else if (window.innerWidth >= 768) { // Tablet (md breakpoint)
                    return 2;
                } else { // Mobile
                    return 1;
                }
            }

            // Función para actualizar la posición del carrusel y el tamaño de los tips
            function updateCarousel() {
                const tipsPerPage = getTipsPerPage();
                // Calcula el número total de "páginas" de tips
                const totalPages = Math.ceil(totalTips / tipsPerPage);
                
                // Asegura que currentSlide no se salga de los límites si tipsPerPage cambia
                if (currentSlide >= totalPages) {
                    currentSlide = 0; // Reinicia al inicio si se redimensiona y la página actual ya no existe
                }

                // Obtiene el ancho del contenedor visible del carrusel
                const carouselContainerWidth = tipsCarouselContainer.offsetWidth;
                // Calcula el desplazamiento horizontal necesario
                const offset = -currentSlide * carouselContainerWidth;
                tipsInnerWrapper.style.transform = `translateX(${offset}px)`;

                // Ajusta el ancho de cada tip individual para que se ajusten a la cuadrícula actual
                tips.forEach(tip => {
                    tip.style.width = `${100 / tipsPerPage}%`;
                });
            }

            // Función para iniciar el deslizamiento automático del carrusel
            function startAutoSlide() {
                // Limpia cualquier intervalo existente para evitar que se ejecuten múltiples intervalos
                if (intervalId) {
                    clearInterval(intervalId);
                }
                intervalId = setInterval(() => {
                    const tipsPerPage = getTipsPerPage();
                    const totalPages = Math.ceil(totalTips / tipsPerPage);
                    // Mueve al siguiente slide, reiniciando al primero si llega al final
                    currentSlide = (currentSlide + 1) % totalPages;
                    updateCarousel();
                }, 8000); // Cambia de slide cada 8 segundos
            }

            // Inicializa el carrusel y comienza el deslizamiento automático al cargar la página
            updateCarousel();
            startAutoSlide();

            // Re-calcula y actualiza el carrusel cuando la ventana cambia de tamaño
            window.addEventListener('resize', () => {
                updateCarousel();
                startAutoSlide(); // Reinicia el auto-slide para ajustarse al nuevo número de tips por página
            });
        });
    </script>
</body>
</html>
